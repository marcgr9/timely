#!/bin/sh

read -r -d '' applescriptCode <<'EOF'
   set dialogText to text returned of (display dialog "Terminating session in {TIME} minutes" default answer "")
   return dialogText
EOF

dialogText=$(osascript -e "$applescriptCode");

echo $dialogText;

if [ $dialogText == "ok" ]; then
    "{FILE}" & A=$!
    
    sleep "$( expr {TIME} \* 60 )"
    
    osascript -e 'display notification "Closing app in {EXTRA} minutes" with title "Timely"'
    sleep "$( expr {EXTRA} \* 60)"
    kill -n 1 $A
fi
